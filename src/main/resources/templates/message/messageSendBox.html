<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>basic</title>
	<link rel="shortcut icon" th:href="@{ /images/favicon.gif }" type="image/x-icon">
    <link rel="stylesheet" th:href="@{/css/common/reset.css}">
    <link rel="stylesheet" th:href="@{/css/common/basic.css}">
    <link rel="stylesheet" th:href="@{/css/msBoard/board.css}">
</head>
<script>
function checkAll() {
	if($("#cboxAll").is(':checked')) {
		$("input[name=cbox]").prop("checked", true);
	} else {
		$("input[name=cbox]").prop("checked", false);
	}
}

</script>

<body>
	<div id="wrap">
    <div th:replace="common/header.html"></div>


		<div id="contents">
			<div id="sideBar" style="float: left;">
				<h3>쪽지함</h3>
				<ul>
					<li class="main"><a href="/ms/msinsert">쪽지보내기</a></li>
					<li class="main"><a href="/ms/recp">받은쪽지함</a></li>
					<li class="main"><a href="/ms/send">보낸쪽지함</a></li>
					<li class="main"><a href="/ms/allrecp">쪽지보관함</a></li>
				</ul>
			</div>
				<h3 style="position: relative; top: 40px; left: 80px">보낸쪽지함</h3><br>
<!--/*			<hr style="width: 1000px; position: relative; left:50px; top:50px"><br> */-->
			<div id="messageheader" style="float:left; position:relative; top:60px; left: 60px">
				<form th:action="@{/ms/recp}" method="get">
					<input type="hidden" name="searchbox" value="1">
					<select name="searchCondition" id="searchCondition" 
						    style="border: 1px solid #bbb; border-radius: 8px; padding: 10px 12px; font-size: 14px;margin: 10px;">
						<option value="msTitle">제목</option>
						<option value="sendName">보낸사람</option>
					</select>
					<input type="search" name="searchValue" id="searchValue" 
							style="width: 300px; border: 1px solid #bbb; border-radius: 8px; padding: 10px 12px; font-size: 14px;">
					<button style="width:70px; border: 1px solid #bbb; border-radius: 8px; padding: 10px 12px; font-size: 14px;">검색</button>
				</form>
			</div>
			<button type="button" style="position: relative; top: 125px; right: 425px; padding: 6px 8px; border: 1px solid #bbb; border-radius: 8px;">삭제</button>
	
			<div class="table-area">
				<table align="center" id="listArea">
					<tr>
						<th><input type="checkbox" id="cboxAll" name="cboxAll" onclick="checkAll();" style="margin: 10px"></th>
						<th>보낸사람</th>
						<th>제목</th>
						<th>날짜</th>
						<th>글번호</th>
					</tr>
					<tr th:each="boardList : ${ boardList }">
						<td><input type="checkbox" name="cbox" style="margin: 10px"></td>
						<td th:text="${boardList.sendName}"></td>
						<td th:text="${boardList.msTitle}"></td>
						<td th:text="${boardList.sendDate}"></td>
						<td th:text="${boardList.msNo}"></td>
					</tr>
				</table>
			</div>
		</div>
	</div>

		<!-- 페이지 처리 -->
		<div class="page-nation" align="">
			<!-- 맨 앞으로 이동 버튼 -->
			<button th:onclick="'location.href=\'/ms/send?currentPage='+ @{${selectCriteria.startPage}} + '\''"
					th:disabled="${selectCriteria.pageNo == 1}"><<</button>
			<!-- 이전 페이지 버튼 -->
			<button th:onclick="'location.href=\'/ms/send?currentPage='+ @{${selectCriteria.pageNo - 1}} + '\''"
					th:disabled="${selectCriteria.pageNo == 1}"><</button>
			<!-- 숫자 버튼 -->
			<th:block th:each="page : ${#numbers.sequence(selectCriteria.startPage, selectCriteria.endPage)}">
			<button th:text="${ page }"
					th:onclick="'location.href=\'/ms/send?currentPage='+ @{${page}} + '\''"
					th:disabled="${ selectCriteria.pageNo eq page }"></button>
			</th:block>

			<!-- 다음 페이지 버튼 -->
			<button th:onclick="'location.href=\'/ms/send?currentPage='+ @{${selectCriteria.pageNo + 1}} + '\''"
					th:disabled="${selectCriteria.pageNo == selectCriteria.maxPage}">></button>
			<!-- 마지막 페이지로 이동 버튼 -->
			<button th:onclick="'location.href=\'/ms/send?currentPage='+ @{${selectCriteria.maxPage}} + '\''"
					th:disabled="${selectCriteria.pageNo == selectCriteria.maxPage}">>></button>
			</div>


	<script>
		if (document.querySelectorAll("#listArea td")) {
			const $tds = document.querySelectorAll("#listArea td");
			for (let i = 0; i < $tds.length; i++) {

               $tds[i].onmouseenter = function(){

                    this.parentNode.style.cursor = "pointer";
                }

				$tds[i].onclick = function() {
					const msNo = this.parentNode.children[4].innerText;
					/* chileren[ 행에 있는 index 위치 찾는거 ] */
					location.href = "/ms/msdetail?msNo=" + msNo;
				}
			}
		}
	</script>
</body>
</html>