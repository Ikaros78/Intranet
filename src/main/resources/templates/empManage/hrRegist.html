<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>발령 등록</title>
    <link rel="stylesheet" th:href="@{/css/empManage/hrRegist.css}">
    <script src="http://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body onresize="parent.resizeTo(900, 600)" onload="parent.resizeTo(900,600)">
    <h1>발령 등록</h1>
    <form th:action="@{/emp/hrRegist}" method="post" id="hrRegist">
        <table>
            <tr>
                <th>발령구분</th>
                <td><select name="pa_category">
                    <option>선택</option>
                    <option value="promotion">승진</option>
                    <option value="move">부서이동</option>
                </select></td>
            </tr>
            <tr>
                <th>발령일자</th>
                <td><input type="date" name="pa_date"></td>
            </tr>
            <tr class="mem_num">
                <th>사원번호</th>
                <td id="selectNum">
                    <input type="text" name="mem_num" id="mem_num">
                    <button type="button" id="send">검색</button>
                </td>
            </tr>
            <tr>
                <th>직원명</th>
                <td id="name"></td>
                <th>발령직급</th>
                <td>
                    <select name="pa_bef_rank">
                    <option>선택</option>
                    <option value="dept_rank1">사원</option>
                    <option value="dept_rank2">대리</option>
                    <option value="dept_rank3">과장</option>
                    <option value="dept_rank4">사장</option>
                    <option value="dept_rank5">회장</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th>발령부서</th>
                <td><select name="dept_code">
                    <option>선택</option>
                    <option value="D1">인사부</option>
                    <option value="D2">기술지원부</option>
                    <option value="D3">영업1부</option>
                    <option value="D4">영업2부</option>
                    <option value="D5">사업부</option>
                </select></td>
            </tr>
            <tr>
                <th>비고</th>
                <td class="widthText" colspan="4"><input type="text" name="pa_contents"></td>
            </tr>
        </table>
        <button onclick="confirm()">저장</button>
    </form>
    <script>

        function confirm(){
            alert("등록 완료 되었습니다.");

            window.close();
        }

        let mem_num = $("#mem_num").val();

        $("#send").click(function(){
            $.ajax({
               url: "getMemberName?mem_num=" + $("#mem_num").val(),
               type: "GET",
               contentType: "application/json;charset=UTF-8",
               dataType: "json",
               success: function(data){

                   console.log('data 나오나여 : ' + data.mem_name)

                   $("#name").append("<p>" + data.mem_name + "</p>");

               } ,
                error: function(error){
                   console.log('에러 발생했어여ㅠ.. ' + error);
                }
            });
        });

    </script>
</body>
</html>