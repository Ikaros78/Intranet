<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>일정 권한 관리</title>
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" th:href="@{/css/common/reset.css}">
    <link rel="stylesheet" th:href="@{/css/common/basic.css}">
    <link rel="stylesheet" th:href="@{/css/calendar/calendarManage.css}">
    <style>
        ul {
            padding: 0 !important;
        }
    </style>
</head>

<body>
    <div id="wrap">
        <div th:replace="/common/header.html"></div>
        <div id="contents">
            <div id="sideBar">
                <h3>직원관리</h3>
                <ul>
                    <li class="main"><a href="../manage/emplManage/emplList.html">인사 관리</a>
                        <ul class="sub sub1">
                            <li><a href="../manage/emplManage/emplList.html">직원 관리</a></li>
                            <li><a href="../manage/emplManage/hrList.html">직원 발령 관리</a></li>
                        </ul>
                    </li>
                    <li class="main"><a href="../manage/accessManage/boardManage.html">권한 관리</a>
                        <ul class="sub sub2">
                            <li><a th:href="@{/calendarManage/list}">일정 권한 관리</a></li>
                            <li><a href="../manage/accessManage/hrManage.html">인사 권한 관리</a></li>
                            <li><a href="../manage/accessManage/boardManage.html">게시판 권한 관리</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div id="container">
                <h4 style="font-weight: bold;">일정 권한 관리</h4>
                <hr>
                <form id="dept" th:action="@{ /calendarManage/list }" >
                    <span>부서</span> &nbsp 
                    <select name="searchCondition" id="searchCondition">
                            <option value="all"> 전체 </option>
                        <th:block th:each="dept : ${ deptList }">
                            <option th:value="${ dept.dept_code }" th:text="${ dept.dept_name }"></option>
                        </th:block>
                    </select>&nbsp &nbsp
                    <button type="submit">검색</button>
                </form>

                <form id="list" action="">
                    <div class="scroll">
                        <table id="tableData">
                            <thead>
                                <tr>
                                    <th>사원번호</th>
                                    <th>성명</th>
                                    <th>부서</th>
                                    <th>직책</th>
                                    <th>입사일자</th>
                                    <th>전화번호</th>
                                    <th>이메일</th>
                                    <th class="col-2">권한여부(전체)</th>
                                    <th class="col-2">권한여부(부서)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="member : ${ memberList }">
                                    <td th:text="${ member.mem_num }">1</td>
                                    <td th:text="${ member.mem_name }">김민수</td>
                                    <td th:text="${ member.department.dept_name }">부서1</td>
                                    <td th:text="${ member.dept_rank }">사내이사</td>
                                    <td th:text="${ member.mem_joinDate }">22-08-23</td>
                                    <td th:text="${ member.mem_phone }">010-1234-5678</td>
                                    <td th:text="${ member.mem_email }">onlyonlyonly@gmail.com</td>
                                    <th:block th:if="${ #lists.size(member.authorit) == 2 }">
                                        <td><input  type="checkbox" class="check1" name="checkAll" checked></td>
                                        <td><input  type="checkbox" class="check2" name="checkDept" checked></td>
                                    </th:block>
                                    <th:block th:if="${ #lists.size(member.authorit) == 1 and member.authorit[0].auCode == null }">
                                        <td><input  type="checkbox" class="check1" name="checkAll"></td>
                                        <td><input  type="checkbox" class="check2" name="checkDept"></td>
                                    </th:block>
                                    <th:block th:if="${ #lists.size(member.authorit) == 1 and member.authorit[0].auCode == 'CD_ALL' }">
                                        <td><input  type="checkbox" class="check1" name="checkAll" checked></td>
                                        <td><input  type="checkbox" class="check2" name="checkDept"></td>
                                    </th:block>
                                    <th:block th:if="${ #lists.size(member.authorit) == 1 and member.authorit[0].auCode == 'CD_DEPT' }">
                                        <td><input  type="checkbox" class="check1" name="checkAll" ></td>
                                        <td><input  type="checkbox" class="check2" name="checkDept" checked></td>
                                    </th:block>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="button1" class="mt-3" style="float: right;">
                        <button type="submit">적용</button>
                    </div>
                </form>

            </div>
        </div>
</body>

</html>